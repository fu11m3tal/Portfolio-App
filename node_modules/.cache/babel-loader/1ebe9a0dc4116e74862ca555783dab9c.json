{"ast":null,"code":"var _jsxFileName = \"/Users/syoh/Desktop/App/portfolio.github.io/src/components/TwentyFourtyEight.js\";\nimport React from 'react';\nimport '../css/TwentyFourtyEight.css';\n\nclass TwentyFourtyEight extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      matrix: [[0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]],\n      rows: [0, 1],\n      columns: [0, 1, 2, 3],\n      spaces: 16,\n      score: 0\n    };\n    this.handleLeftSelect = this.handleLeftSelect.bind(this);\n    this.handleRightSelect = this.handleRightSelect.bind(this);\n    this.handleUpSelect = this.handleUpSelect.bind(this);\n    this.handleDownSelect = this.handleDownSelect.bind(this);\n    this.traverseMatrixVertical = this.traverseMatrixVertical.bind(this);\n    this.traverseMatrixHorizontal = this.traverseMatrixHorizontal.bind(this);\n    this.addNewSquare = this.addNewSquare.bind(this);\n    this.getMovesLeftCount = this.getMovesLeftCount.bind(this);\n    this.checkKeyPress = this.checkKeyPress.bind(this);\n    this.initiateNewGame = this.initiateNewGame.bind(this);\n  }\n\n  initiateNewGame() {\n    this.addNewSquare();\n  }\n\n  getMovesLeftCount() {\n    var {\n      matrix,\n      score\n    } = this.state;\n    var spaces = [...matrix[0], ...matrix[1], ...matrix[2], ...matrix[3]];\n    var spacesLeft = spaces.filter(value => value === 0);\n    if (spacesLeft.length === -1) alert(\"game over\");\n    this.setState({\n      spaces: spacesLeft.length,\n      score: score + 1\n    });\n  }\n\n  traverseMatrixHorizontal(direction) {\n    var {\n      matrix\n    } = this.state;\n\n    for (var i = 0; i < 4; i++) {\n      var occupied = [];\n      var remainder = [];\n      var empty = [];\n\n      for (var j = 0; j < 4; j++) {\n        matrix[i][j] === 0 ? empty.push(matrix[i][j]) : occupied.push(matrix[i][j]);\n      }\n\n      var row = [];\n\n      while (occupied.length > 0) {\n        var value = occupied.shift();\n\n        if (occupied[0] === value) {\n          occupied.shift();\n          remainder.push(value * 2);\n          empty.push(0);\n        } else {\n          remainder.push(value);\n        }\n      }\n\n      if (direction === \"right\") row = [...empty, ...remainder];\n      if (direction === \"left\") row = [...remainder, ...empty];\n\n      for (var k = 0; k < 4; k++) {\n        matrix[i][k] = row[k];\n      }\n    }\n\n    this.setState({\n      matrix\n    });\n  }\n\n  traverseMatrixVertical(direction) {\n    var {\n      matrix\n    } = this.state;\n\n    for (var i = 0; i < 4; i++) {\n      var occupied = [];\n      var empty = [];\n      var remainder = [];\n\n      for (var j = 0; j < 4; j++) {\n        matrix[j][i] === 0 ? empty.push(matrix[j][i]) : occupied.push(matrix[j][i]);\n      }\n\n      while (occupied.length > 0) {\n        var value = occupied.shift();\n\n        if (occupied[0] === value) {\n          occupied.shift();\n          remainder.push(value * 2);\n          empty.push(0);\n        } else {\n          remainder.push(value);\n        }\n      }\n\n      var column = [];\n      if (direction === \"down\") column = [...empty, ...remainder];\n      if (direction === \"up\") column = [...remainder, ...empty];\n\n      for (var k = 0; k < 4; k++) {\n        matrix[k][i] = column[k];\n      }\n    }\n\n    this.setState({\n      matrix\n    });\n  }\n\n  addNewSquare() {\n    var {\n      matrix\n    } = this.state;\n    var moveLeft = false;\n    matrix.forEach(row => {\n      if (row.includes(0)) moveLeft = true;\n    });\n    if (!moveLeft) return \"no moves left\";\n\n    var getRandomNumber = (min, max) => {\n      return Math.floor(Math.random() * (max - min) + min);\n    };\n\n    var getRandomSquare = () => {\n      var row = getRandomNumber(0, 4);\n      var column = getRandomNumber(0, 4);\n      return [row, column];\n    };\n\n    var squareCoordinates = getRandomSquare();\n\n    if (matrix[squareCoordinates[0]][squareCoordinates[1]] === 0) {\n      matrix[squareCoordinates[0]][squareCoordinates[1]] = 2;\n      this.setState({\n        matrix\n      });\n    } else {\n      this.addNewSquare();\n    }\n  }\n\n  handleLeftSelect() {\n    this.traverseMatrixHorizontal(\"left\");\n    this.addNewSquare();\n    this.getMovesLeftCount();\n  }\n\n  handleRightSelect() {\n    this.traverseMatrixHorizontal(\"right\");\n    this.addNewSquare();\n    this.getMovesLeftCount();\n  }\n\n  handleUpSelect() {\n    this.traverseMatrixVertical(\"up\");\n    this.addNewSquare();\n    this.getMovesLeftCount();\n  }\n\n  handleDownSelect() {\n    this.traverseMatrixVertical(\"down\");\n    this.addNewSquare();\n    this.getMovesLeftCount();\n  }\n\n  checkKeyPress(key) {\n    var left = {\n      keyCode: \"37\",\n      handleDirectionSelection: this.handleLeftSelect\n    };\n    var right = {\n      keyCode: \"39\",\n      handleDirectionSelection: this.handleRightSelect\n    };\n    var up = {\n      keyCode: \"38\",\n      handleDirectionSelection: this.handleUpSelect\n    };\n    var down = {\n      keyCode: \"40\",\n      handleDirectionSelection: this.handleDownSelect\n    };\n    var controls = [left, right, up, down];\n    controls.forEach(direction => {\n      if (direction.keyCode === key.keyCode) direction.handleDirectionSelection();\n    });\n  }\n\n  componentDidMount() {\n    window.addEventListener(\"keydown\", this.checkKeyPress, false);\n  }\n\n  render() {\n    const {\n      matrix\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"app\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 9\n      }\n    }, \"2048\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"board\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 9\n      }\n    }, matrix.map((row, rIndex) => /*#__PURE__*/React.createElement(\"div\", {\n      key: rIndex,\n      className: \"row\",\n      id: `row-${rIndex + 1}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 13\n      }\n    }, row.map((box, bIndex) => /*#__PURE__*/React.createElement(\"div\", {\n      key: bIndex,\n      className: box !== 0 ? \"open\" : \"closed\",\n      id: `box-${box}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"box\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 19\n      }\n    }, box !== 0 ? box : null))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"dashboard\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"score\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 13\n      }\n    }, \"SCORE: \", `${this.state.score}`), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"controller\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"buttons\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"button\",\n      id: \"up\",\n      onClick: this.handleUpSelect,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"arrow\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 19\n      }\n    }, \"\\u2191\")), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"buttons\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"button\",\n      id: \"left\",\n      onClick: this.handleLeftSelect,\n      onKeyPress: () => {\n        console.log(\"key press\");\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"arrow\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 17\n      }\n    }, \"\\u2190\")), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"button\",\n      id: \"right\",\n      onClick: this.handleRightSelect,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"arrow\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 17\n      }\n    }, \"\\u2192\")), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"buttons\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"button\",\n      id: \"down\",\n      onClick: this.handleDownSelect,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"arrow\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 19\n      }\n    }, \"\\u2193\")), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"buttons\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"button\",\n      id: \"New Game\",\n      onClick: this.handleDownSelect,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 15\n      }\n    }, \"New Game\"), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"button\",\n      id: \"restart\",\n      onClick: this.handleDownSelect,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 15\n      }\n    }, \"Restart\"), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 15\n      }\n    })))));\n  }\n\n}\n\nexport default TwentyFourtyEight;","map":{"version":3,"sources":["/Users/syoh/Desktop/App/portfolio.github.io/src/components/TwentyFourtyEight.js"],"names":["React","TwentyFourtyEight","Component","constructor","props","state","matrix","rows","columns","spaces","score","handleLeftSelect","bind","handleRightSelect","handleUpSelect","handleDownSelect","traverseMatrixVertical","traverseMatrixHorizontal","addNewSquare","getMovesLeftCount","checkKeyPress","initiateNewGame","spacesLeft","filter","value","length","alert","setState","direction","i","occupied","remainder","empty","j","push","row","shift","k","column","moveLeft","forEach","includes","getRandomNumber","min","max","Math","floor","random","getRandomSquare","squareCoordinates","key","left","keyCode","handleDirectionSelection","right","up","down","controls","componentDidMount","window","addEventListener","render","map","rIndex","box","bIndex","console","log"],"mappings":"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","sourcesContent":["import React from 'react';\nimport '../css/TwentyFourtyEight.css';\n\n\nclass TwentyFourtyEight extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      matrix: [[0,0,0,0], [0,0,0,0], [0,0,0,0], [0,0,0,0]],\n      rows: [0,1],\n      columns: [0,1,2,3],\n      spaces: 16,\n      score: 0\n    }\n    this.handleLeftSelect = this.handleLeftSelect.bind(this);\n    this.handleRightSelect = this.handleRightSelect.bind(this);\n    this.handleUpSelect = this.handleUpSelect.bind(this);\n    this.handleDownSelect = this.handleDownSelect.bind(this);\n    this.traverseMatrixVertical = this.traverseMatrixVertical.bind(this);\n    this.traverseMatrixHorizontal = this.traverseMatrixHorizontal.bind(this);\n    this.addNewSquare = this.addNewSquare.bind(this);\n    this.getMovesLeftCount = this.getMovesLeftCount.bind(this);\n    this.checkKeyPress = this.checkKeyPress.bind(this);\n    this.initiateNewGame = this.initiateNewGame.bind(this);\n  }\n\n  initiateNewGame() {\n    this.addNewSquare()\n  }\n\n  getMovesLeftCount() {\n    var {matrix, score} = this.state;\n    var spaces = [...matrix[0], ...matrix[1], ...matrix[2], ...matrix[3]]\n    var spacesLeft = spaces.filter((value) => (value === 0));\n    if(spacesLeft.length === -1) alert(\"game over\")\n    this.setState({spaces: spacesLeft.length, score: score+1})\n  }\n\n  traverseMatrixHorizontal(direction) {\n    var {matrix} = this.state;\n    for(var i = 0; i < 4; i++) {\n      var occupied = [];\n      var remainder = [];\n      var empty = [];\n      for(var j = 0; j < 4; j++) {\n        matrix[i][j] === 0 ? empty.push(matrix[i][j]) : occupied.push(matrix[i][j])\n      }\n      var row = [];\n      while(occupied.length > 0) {\n        var value = occupied.shift();\n        if(occupied[0] === value) {\n          occupied.shift();\n          remainder.push(value * 2)\n          empty.push(0);\n        } else {\n          remainder.push(value);\n        }\n      }\n      if(direction === \"right\") row = [...empty, ...remainder];\n      if(direction === \"left\") row = [...remainder, ...empty]\n      for(var k = 0; k < 4; k++) {\n        matrix[i][k] = row[k]\n      }\n    }\n    this.setState({matrix})\n  }\n\n  traverseMatrixVertical(direction) {\n    var {matrix} = this.state;\n    for(var i = 0; i < 4; i++) {\n      var occupied = [];\n      var empty = [];\n      var remainder = [];\n      for(var j = 0; j < 4; j++) {\n        matrix[j][i] === 0 ? empty.push(matrix[j][i]) : occupied.push(matrix[j][i])\n      }\n      while(occupied.length > 0) {\n        var value = occupied.shift();\n        if(occupied[0] === value) {\n          occupied.shift();\n          remainder.push(value * 2)\n          empty.push(0);\n        } else {\n          remainder.push(value);\n        }\n      }\n      var column = [];\n      if(direction === \"down\") column = [...empty, ...remainder];\n      if(direction === \"up\") column = [...remainder, ...empty]\n      for(var k = 0; k < 4; k++) {\n        matrix[k][i] = column[k]\n      }\n    }\n    this.setState({matrix})\n  }\n\n  addNewSquare() {\n    var {matrix} = this.state;\n    var moveLeft = false;\n    matrix.forEach(row => {\n      if(row.includes(0)) moveLeft = true;\n    })\n    if(!moveLeft) return \"no moves left\"\n    var getRandomNumber = (min, max) => {\n      return Math.floor(Math.random() * (max - min) + min);\n    }\n    var getRandomSquare = () => {\n      var row = getRandomNumber(0,4);\n      var column = getRandomNumber(0,4)\n      return [row, column];\n    }\n    var squareCoordinates = getRandomSquare();\n    if(matrix[squareCoordinates[0]][squareCoordinates[1]] === 0) {\n      matrix[squareCoordinates[0]][squareCoordinates[1]] = 2;\n      this.setState({matrix})\n    } else {\n      this.addNewSquare();\n    }\n  }\n\n\n  handleLeftSelect() {\n    this.traverseMatrixHorizontal(\"left\")\n    this.addNewSquare();\n    this.getMovesLeftCount();\n  }\n  handleRightSelect() {\n    this.traverseMatrixHorizontal(\"right\");\n    this.addNewSquare();\n    this.getMovesLeftCount();\n  }\n  handleUpSelect() {\n    this.traverseMatrixVertical(\"up\");\n    this.addNewSquare();\n    this.getMovesLeftCount();\n  }\n  handleDownSelect() {\n    this.traverseMatrixVertical(\"down\");\n    this.addNewSquare();\n    this.getMovesLeftCount();\n  }\n  checkKeyPress(key) {\n    var left = {\n      keyCode: \"37\",\n      handleDirectionSelection: this.handleLeftSelect\n    }\n    var right = {\n      keyCode: \"39\",\n      handleDirectionSelection: this.handleRightSelect\n    }\n    var up = {\n      keyCode: \"38\",\n      handleDirectionSelection: this.handleUpSelect\n    }\n    var down = {\n      keyCode: \"40\",\n      handleDirectionSelection: this.handleDownSelect\n    }\n    var controls = [left, right, up, down];\n    controls.forEach(direction => {\n      if(direction.keyCode === key.keyCode) direction.handleDirectionSelection();\n    })\n  }\n\n  componentDidMount() {\n    window.addEventListener(\"keydown\", this.checkKeyPress, false);\n  }\n\n  render() {\n    const {matrix} = this.state;\n    return (\n      <div className=\"app\">\n        <h3>2048</h3>\n        <div className=\"board\">\n          {matrix.map((row, rIndex) => (\n            <div key={rIndex} className=\"row\" id={`row-${rIndex+1}`}>\n              {row.map((box, bIndex) => (\n                <div key={bIndex} className={box !== 0 ? \"open\" : \"closed\"} id={`box-${box}`}>\n                  <p className=\"box\">{box !== 0 ? box : null}</p>\n                </div>\n              ))}\n            </div>\n          ))}\n          <div className=\"dashboard\">\n            <span/>\n            <div className=\"score\">\n              SCORE: {`${this.state.score}`}\n            </div>\n            <span/>\n          </div>\n          <div className=\"controller\">\n            <div className=\"buttons\">\n              <span/>\n              <span/>\n              <button \n                  className=\"button\" \n                  id=\"up\"\n                  onClick={this.handleUpSelect}\n                >\n                  <p className=\"arrow\">&uarr;</p>\n              </button>\n              <span/>\n              <span/>\n            </div>\n            <div className=\"buttons\">\n              <span/>\n              <button \n                className=\"button\" \n                id=\"left\"\n                onClick={this.handleLeftSelect}\n                onKeyPress={() => {console.log(\"key press\")}}\n              >\n                <p className=\"arrow\">&larr;</p>\n              </button>\n              <span/>\n              <span/>\n              <button \n                className=\"button\" \n                id=\"right\"\n                onClick={this.handleRightSelect}\n              >\n                <p className=\"arrow\">&rarr;</p>\n              </button>\n              <span/>\n            </div>\n            <div className=\"buttons\">\n              <span/>\n              <span/>\n              <button \n                  className=\"button\" \n                  id=\"down\"\n                  onClick={this.handleDownSelect}\n                >\n                  <p className=\"arrow\">&darr;</p>\n              </button>\n              <span/>\n              <span/>\n            </div>\n            <div className=\"buttons\">\n              <span/>\n              <button \n                  className=\"button\"\n                  id=\"New Game\"\n                  onClick={this.handleDownSelect}\n                >\n                  New Game\n              </button>\n              <span/>\n              <button \n                  className=\"button\"\n                  id=\"restart\"\n                  onClick={this.handleDownSelect}\n                >\n                  Restart\n              </button>\n              <span/>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default TwentyFourtyEight;\n"]},"metadata":{},"sourceType":"module"}